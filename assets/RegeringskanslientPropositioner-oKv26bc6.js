import{j as e}from"./ui-vendor-B50KzqUP.js";import{r as s,L as r}from"./react-vendor-xmALwEl6.js";import{u as a}from"./query-vendor-CSOQ5a_6.js";import{C as n,a as t,S as i,b as l,s as o}from"./index-pAwTUmbv.js";import{B as m}from"./badge-Dz51AyLj.js";import{E as d}from"./EmptyState-DoaAbft3.js";import{F as c}from"./FilterBar-C5MLVTVW.js";import{F as p}from"./file-text-C6mr0w7N.js";import{C as x}from"./calendar-B2HvfI6x.js";import{D as u}from"./download-BYd_rWdu.js";import{E as h}from"./external-link-UpQKxp4P.js";import{f,s as j}from"./sv-qPpAa4hK.js";import"./supabase-vendor-D1LX2-r6.js";import"./circle-alert-CS47a3vq.js";import"./search-Bl9Tdm91.js";const g=()=>{const[g,v]=s.useState(""),{data:b,isLoading:N}=a({queryKey:["propositioner"],queryFn:async()=>{const{data:e,error:s}=await o.from("regeringskansliet_propositioner").select("*").order("publicerad_datum",{ascending:!1});if(s)throw s;return e}}),w=null==b?void 0:b.filter(e=>{var s,r,a;const n=g.toLowerCase();return(null==(s=e.titel)?void 0:s.toLowerCase().includes(n))||(null==(r=e.departement)?void 0:r.toLowerCase().includes(n))||(null==(a=e.beteckningsnummer)?void 0:a.toLowerCase().includes(n))});return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"w-full bg-primary py-1"}),e.jsxs("div",{className:"container mx-auto px-4 py-12 max-w-7xl",children:[e.jsxs("header",{className:"mb-12",children:[e.jsx(r,{to:"/regeringskansliet",className:"text-primary hover:underline mb-4 inline-block",children:"← Tillbaka till Regeringskansliet"}),e.jsx("h1",{className:"text-4xl font-serif font-bold text-foreground mb-4",children:"Propositioner"}),e.jsx("div",{className:"w-20 h-1 bg-secondary mb-6"}),e.jsxs("p",{className:"text-muted-foreground",children:[(null==w?void 0:w.length)||0," propositioner från regeringen"]})]}),e.jsx(c,{searchQuery:g,onSearchChange:v,placeholder:"Sök propositioner, beteckningsnummer..."}),N?e.jsx("div",{className:"space-y-4",children:[...Array(10)].map((s,r)=>e.jsx(n,{children:e.jsxs(t,{children:[e.jsx(i,{className:"h-6 w-3/4 mb-2"}),e.jsx(i,{className:"h-4 w-1/2"})]})},r))}):w&&0===w.length?e.jsx(d,{message:g?"Inga propositioner hittades":"Inga propositioner i databasen",suggestion:g?"Prova att ändra din sökning":"Använd 'Hämta data'-knappen för att ladda ned propositioner"}):e.jsx("div",{className:"space-y-4",children:null==w?void 0:w.map(s=>e.jsx(n,{className:"hover:shadow-lg transition-shadow",children:e.jsx(t,{children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[s.beteckningsnummer&&e.jsxs(m,{variant:"outline",children:[e.jsx(p,{className:"h-3 w-3 mr-1"}),s.beteckningsnummer]}),s.departement&&e.jsx(m,{variant:"secondary",children:s.departement})]}),e.jsx(l,{className:"text-xl mb-3",children:s.titel||"Proposition"}),e.jsx("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:s.publicerad_datum&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(x,{className:"h-3 w-3"}),f(new Date(s.publicerad_datum),{addSuffix:!0,locale:j})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[s.local_pdf_url&&e.jsxs("a",{href:s.local_pdf_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-primary hover:underline font-medium",children:["PDF (Lokal) ",e.jsx(u,{className:"h-3 w-3"})]}),s.url&&e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-primary hover:underline",children:["Läs mer ",e.jsx(h,{className:"h-3 w-3"})]}),s.pdf_url&&!s.local_pdf_url&&e.jsxs("a",{href:s.pdf_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-primary hover:underline",children:["PDF ",e.jsx(u,{className:"h-3 w-3"})]})]})]})})},s.id))})]})]})};export{g as default};
