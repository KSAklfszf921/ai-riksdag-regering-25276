import{j as e}from"./ui-vendor-B50KzqUP.js";import{r as a,L as s}from"./react-vendor-xmALwEl6.js";import{u as r}from"./query-vendor-CSOQ5a_6.js";import{c as l,C as n,a as t,S as d,b as i,f as m,s as o}from"./index-pAwTUmbv.js";import{B as c}from"./badge-Dz51AyLj.js";import{E as h}from"./EmptyState-DoaAbft3.js";import{F as p}from"./FilterBar-C5MLVTVW.js";import{C as x}from"./calendar-B2HvfI6x.js";import{F as j}from"./file-text-C6mr0w7N.js";import{E as f}from"./external-link-UpQKxp4P.js";import{f as u,s as g}from"./sv-qPpAa4hK.js";import"./supabase-vendor-D1LX2-r6.js";import"./circle-alert-CS47a3vq.js";import"./search-Bl9Tdm91.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=l("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),b=()=>{const[l,b]=a.useState(""),{data:N,isLoading:y}=r({queryKey:["pressmeddelanden"],queryFn:async()=>{const{data:e,error:a}=await o.from("regeringskansliet_pressmeddelanden").select("*").order("publicerad_datum",{ascending:!1});if(a)throw a;return e}}),k=null==N?void 0:N.filter(e=>{var a,s,r;const n=l.toLowerCase();return(null==(a=e.titel)?void 0:a.toLowerCase().includes(n))||(null==(s=e.departement)?void 0:s.toLowerCase().includes(n))||(null==(r=e.innehall)?void 0:r.toLowerCase().includes(n))});return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"w-full bg-primary py-1"}),e.jsxs("div",{className:"container mx-auto px-4 py-12 max-w-7xl",children:[e.jsxs("header",{className:"mb-12",children:[e.jsx(s,{to:"/regeringskansliet",className:"text-primary hover:underline mb-4 inline-block",children:"← Tillbaka till Regeringskansliet"}),e.jsx("h1",{className:"text-4xl font-serif font-bold text-foreground mb-4",children:"Pressmeddelanden"}),e.jsx("div",{className:"w-20 h-1 bg-secondary mb-6"}),e.jsxs("p",{className:"text-muted-foreground",children:[(null==k?void 0:k.length)||0," pressmeddelanden från regeringen"]})]}),e.jsx(p,{searchQuery:l,onSearchChange:b,placeholder:"Sök pressmeddelanden, departement..."}),y?e.jsx("div",{className:"space-y-4",children:[...Array(10)].map((a,s)=>e.jsx(n,{children:e.jsxs(t,{children:[e.jsx(d,{className:"h-6 w-3/4 mb-2"}),e.jsx(d,{className:"h-4 w-1/2"})]})},s))}):k&&0===k.length?e.jsx(h,{message:l?"Inga pressmeddelanden hittades":"Inga pressmeddelanden i databasen",suggestion:l?"Prova att ändra din sökning":"Använd 'Hämta data'-knappen för att ladda ned pressmeddelanden"}):e.jsx("div",{className:"space-y-4",children:null==k?void 0:k.map(a=>e.jsx(n,{className:"hover:shadow-lg transition-shadow",children:e.jsx(t,{children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:a.departement&&e.jsxs(c,{variant:"outline",className:"gap-1",children:[e.jsx(v,{className:"h-3 w-3"}),a.departement]})}),e.jsx(i,{className:"text-xl mb-2",children:a.titel||"Pressmeddelande"}),a.innehall&&e.jsx(m,{className:"text-base line-clamp-2",children:a.innehall}),e.jsx("div",{className:"flex items-center gap-4 mt-3 text-sm text-muted-foreground",children:a.publicerad_datum&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(x,{className:"h-3 w-3"}),u(new Date(a.publicerad_datum),{addSuffix:!0,locale:g})]})}),a.local_bilagor&&Array.isArray(a.local_bilagor)&&a.local_bilagor.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Nedladdade bilagor:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.local_bilagor.map((a,s)=>e.jsxs("a",{href:a.local_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-xs text-primary hover:underline",children:[e.jsx(j,{className:"h-3 w-3"}),a.filename]},s))})]})]}),a.url&&e.jsxs("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-primary hover:underline",children:["Läs mer ",e.jsx(f,{className:"h-3 w-3"})]})]})})},a.id))})]})]})};export{b as default};
