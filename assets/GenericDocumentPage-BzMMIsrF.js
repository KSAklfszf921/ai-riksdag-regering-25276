import{j as e,M as t,N as a,O as n,Q as r}from"./ui-vendor-B50KzqUP.js";import{r as s,L as i}from"./react-vendor-xmALwEl6.js";import{b as o,u as l}from"./query-vendor-CSOQ5a_6.js";import{c,B as d,H as u,d as m,X as h,I as f,s as g,h as x,C as p,a as w,S as b,b as j,f as v,e as N}from"./index-pAwTUmbv.js";import{B as y}from"./badge-Dz51AyLj.js";import{E as k}from"./EmptyState-DoaAbft3.js";import{P as C}from"./ProgressTracker-CmOtBvV_.js";import{u as M}from"./useFavorites-CanDdV2n.js";import{a as S,C as T}from"./label-Dn_Iw-YU.js";import{C as P}from"./calendar-B2HvfI6x.js";import{A as D}from"./arrow-left-DtSRHp6m.js";import{S as F}from"./search-Bl9Tdm91.js";import{F as O}from"./file-down-CUtSwsiK.js";import{F as L}from"./file-text-C6mr0w7N.js";import{g as _,t as E,c as z,a as Y,m as H,b as q,e as $}from"./sv-qPpAa4hK.js";import{U as G}from"./user-BK652O1W.js";import{D as A}from"./download-BYd_rWdu.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=c("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Q=c("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function I(e,t){var a,n,r,s;const i=_(),o=(null==t?void 0:t.weekStartsOn)??(null==(n=null==(a=null==t?void 0:t.locale)?void 0:a.options)?void 0:n.weekStartsOn)??i.weekStartsOn??(null==(s=null==(r=i.locale)?void 0:r.options)?void 0:s.weekStartsOn)??0,l=E(e),c=l.getDay(),d=(c<o?7:0)+c-o;return l.setDate(l.getDate()-d),l.setHours(0,0,0,0),l}function R(e){return I(e,{weekStartsOn:1})}function W(e){const t=E(e),a=t.getFullYear(),n=z(e,0);n.setFullYear(a+1,0,4),n.setHours(0,0,0,0);const r=R(n),s=z(e,0);s.setFullYear(a,0,4),s.setHours(0,0,0,0);const i=R(s);return t.getTime()>=r.getTime()?a+1:t.getTime()>=i.getTime()?a:a-1}function X(e){const t=E(e);return t.setHours(0,0,0,0),t}function U(e){if(!(t=e,t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)||"number"==typeof e))return!1;var t;const a=E(e);return!isNaN(Number(a))}function V(e){const t=E(e),a=function(e,t){const a=X(e),n=X(t),r=+a-Y(a),s=+n-Y(n);return Math.round((r-s)/H)}(t,function(e){const t=E(e),a=z(e,0);return a.setFullYear(t.getFullYear(),0,1),a.setHours(0,0,0,0),a}(t));return a+1}function K(e){const t=E(e),a=+R(t)-+function(e){const t=W(e),a=z(e,0);return a.setFullYear(t,0,4),a.setHours(0,0,0,0),R(a)}(t);return Math.round(a/q)+1}function J(e,t){var a,n,r,s;const i=E(e),o=i.getFullYear(),l=_(),c=(null==t?void 0:t.firstWeekContainsDate)??(null==(n=null==(a=null==t?void 0:t.locale)?void 0:a.options)?void 0:n.firstWeekContainsDate)??l.firstWeekContainsDate??(null==(s=null==(r=l.locale)?void 0:r.options)?void 0:s.firstWeekContainsDate)??1,d=z(e,0);d.setFullYear(o+1,0,c),d.setHours(0,0,0,0);const u=I(d,t),m=z(e,0);m.setFullYear(o,0,c),m.setHours(0,0,0,0);const h=I(m,t);return i.getTime()>=u.getTime()?o+1:i.getTime()>=h.getTime()?o:o-1}function Z(e,t){const a=E(e),n=+I(a,t)-+function(e,t){var a,n,r,s;const i=_(),o=(null==t?void 0:t.firstWeekContainsDate)??(null==(n=null==(a=null==t?void 0:t.locale)?void 0:a.options)?void 0:n.firstWeekContainsDate)??i.firstWeekContainsDate??(null==(s=null==(r=i.locale)?void 0:r.options)?void 0:s.firstWeekContainsDate)??1,l=J(e,t),c=z(e,0);return c.setFullYear(l,0,o),c.setHours(0,0,0,0),I(c,t)}(a,t);return Math.round(n/q)+1}function ee(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const te={y(e,t){const a=e.getFullYear(),n=a>0?a:1-a;return ee("yy"===t?n%100:n,t.length)},M(e,t){const a=e.getMonth();return"M"===t?String(a+1):ee(a+1,2)},d:(e,t)=>ee(e.getDate(),t.length),a(e,t){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];default:return"am"===a?"a.m.":"p.m."}},h:(e,t)=>ee(e.getHours()%12||12,t.length),H:(e,t)=>ee(e.getHours(),t.length),m:(e,t)=>ee(e.getMinutes(),t.length),s:(e,t)=>ee(e.getSeconds(),t.length),S(e,t){const a=t.length,n=e.getMilliseconds();return ee(Math.trunc(n*Math.pow(10,a-3)),t.length)}},ae="midnight",ne="noon",re="morning",se="afternoon",ie="evening",oe="night",le={G:function(e,t,a){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"});case"GGGGG":return a.era(n,{width:"narrow"});default:return a.era(n,{width:"wide"})}},y:function(e,t,a){if("yo"===t){const t=e.getFullYear(),n=t>0?t:1-t;return a.ordinalNumber(n,{unit:"year"})}return te.y(e,t)},Y:function(e,t,a,n){const r=J(e,n),s=r>0?r:1-r;if("YY"===t){return ee(s%100,2)}return"Yo"===t?a.ordinalNumber(s,{unit:"year"}):ee(s,t.length)},R:function(e,t){return ee(W(e),t.length)},u:function(e,t){return ee(e.getFullYear(),t.length)},Q:function(e,t,a){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return ee(n,2);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});default:return a.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,a){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return ee(n,2);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});default:return a.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,a){const n=e.getMonth();switch(t){case"M":case"MM":return te.M(e,t);case"Mo":return a.ordinalNumber(n+1,{unit:"month"});case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});default:return a.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,a){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return ee(n+1,2);case"Lo":return a.ordinalNumber(n+1,{unit:"month"});case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});default:return a.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,a,n){const r=Z(e,n);return"wo"===t?a.ordinalNumber(r,{unit:"week"}):ee(r,t.length)},I:function(e,t,a){const n=K(e);return"Io"===t?a.ordinalNumber(n,{unit:"week"}):ee(n,t.length)},d:function(e,t,a){return"do"===t?a.ordinalNumber(e.getDate(),{unit:"date"}):te.d(e,t)},D:function(e,t,a){const n=V(e);return"Do"===t?a.ordinalNumber(n,{unit:"dayOfYear"}):ee(n,t.length)},E:function(e,t,a){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,a,n){const r=e.getDay(),s=(r-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return ee(s,2);case"eo":return a.ordinalNumber(s,{unit:"day"});case"eee":return a.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(r,{width:"short",context:"formatting"});default:return a.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,a,n){const r=e.getDay(),s=(r-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return ee(s,t.length);case"co":return a.ordinalNumber(s,{unit:"day"});case"ccc":return a.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(r,{width:"narrow",context:"standalone"});case"cccccc":return a.day(r,{width:"short",context:"standalone"});default:return a.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,a){const n=e.getDay(),r=0===n?7:n;switch(t){case"i":return String(r);case"ii":return ee(r,t.length);case"io":return a.ordinalNumber(r,{unit:"day"});case"iii":return a.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,a){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(n,{width:"narrow",context:"formatting"});default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,a){const n=e.getHours();let r;switch(r=12===n?ne:0===n?ae:n/12>=1?"pm":"am",t){case"b":case"bb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(r,{width:"narrow",context:"formatting"});default:return a.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,a){const n=e.getHours();let r;switch(r=n>=17?ie:n>=12?se:n>=4?re:oe,t){case"B":case"BB":case"BBB":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(r,{width:"narrow",context:"formatting"});default:return a.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,a){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),a.ordinalNumber(t,{unit:"hour"})}return te.h(e,t)},H:function(e,t,a){return"Ho"===t?a.ordinalNumber(e.getHours(),{unit:"hour"}):te.H(e,t)},K:function(e,t,a){const n=e.getHours()%12;return"Ko"===t?a.ordinalNumber(n,{unit:"hour"}):ee(n,t.length)},k:function(e,t,a){let n=e.getHours();return 0===n&&(n=24),"ko"===t?a.ordinalNumber(n,{unit:"hour"}):ee(n,t.length)},m:function(e,t,a){return"mo"===t?a.ordinalNumber(e.getMinutes(),{unit:"minute"}):te.m(e,t)},s:function(e,t,a){return"so"===t?a.ordinalNumber(e.getSeconds(),{unit:"second"}):te.s(e,t)},S:function(e,t){return te.S(e,t)},X:function(e,t,a){const n=e.getTimezoneOffset();if(0===n)return"Z";switch(t){case"X":return de(n);case"XXXX":case"XX":return ue(n);default:return ue(n,":")}},x:function(e,t,a){const n=e.getTimezoneOffset();switch(t){case"x":return de(n);case"xxxx":case"xx":return ue(n);default:return ue(n,":")}},O:function(e,t,a){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+ce(n,":");default:return"GMT"+ue(n,":")}},z:function(e,t,a){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+ce(n,":");default:return"GMT"+ue(n,":")}},t:function(e,t,a){return ee(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,a){return ee(e.getTime(),t.length)}};function ce(e,t=""){const a=e>0?"-":"+",n=Math.abs(e),r=Math.trunc(n/60),s=n%60;return 0===s?a+String(r):a+String(r)+t+ee(s,2)}function de(e,t){if(e%60==0){return(e>0?"-":"+")+ee(Math.abs(e)/60,2)}return ue(e,t)}function ue(e,t=""){const a=e>0?"-":"+",n=Math.abs(e);return a+ee(Math.trunc(n/60),2)+t+ee(n%60,2)}const me=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},he=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},fe={p:he,P:(e,t)=>{const a=e.match(/(P+)(p+)?/)||[],n=a[1],r=a[2];if(!r)return me(e,t);let s;switch(n){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",me(n,t)).replace("{{time}}",he(r,t))}},ge=/^D+$/,xe=/^Y+$/,pe=["D","DD","YY","YYYY"];const we=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,be=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,je=/^'([^]*?)'?$/,ve=/''/g,Ne=/[a-zA-Z]/;function ye(e,t,a){var n,r,s,i;const o=_(),l=o.locale??$,c=o.firstWeekContainsDate??(null==(r=null==(n=o.locale)?void 0:n.options)?void 0:r.firstWeekContainsDate)??1,d=o.weekStartsOn??(null==(i=null==(s=o.locale)?void 0:s.options)?void 0:i.weekStartsOn)??0,u=E(e);if(!U(u))throw new RangeError("Invalid time value");let m=t.match(be).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,fe[t])(e,l.formatLong)}return e}).join("").match(we).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:ke(e)};if(le[t])return{isToken:!0,value:e};if(t.match(Ne))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});l.localize.preprocessor&&(m=l.localize.preprocessor(u,m));const h={firstWeekContainsDate:c,weekStartsOn:d,locale:l};return m.map(a=>{if(!a.isToken)return a.value;const n=a.value;(function(e){return xe.test(e)}(n)||function(e){return ge.test(e)}(n))&&function(e,t,a){const n=function(e,t,a){const n="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,a);if(console.warn(n),pe.includes(e))throw new RangeError(n)}(n,t,String(e));return(0,le[n[0]])(u,n,l.localize,h)}).join("")}function ke(e){const t=e.match(je);return t?t[1].replace(ve,"'"):e}const Ce=({tableName:t,documentId:a,size:n="sm"})=>{const{isFavorite:r,isLoading:s,toggleFavorite:i}=M(t,a);return e.jsxs(d,{variant:"ghost",size:n,onClick:()=>i(),disabled:s,className:"gap-2",children:[e.jsx(u,{className:m("h-4 w-4 transition-all",r&&"fill-destructive text-destructive")}),"icon"!==n&&(r?"I favoriter":"Spara")]})},Me=t,Se=a,Te=s.forwardRef(({className:t,align:a="center",sideOffset:s=4,...i},o)=>e.jsx(n,{children:e.jsx(r,{ref:o,align:a,sideOffset:s,className:m("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...i})}));Te.displayName=r.displayName;const Pe=({dateFrom:t,dateTo:a,selectedCategories:n,availableCategories:r,onDateFromChange:s,onDateToChange:i,onCategoryToggle:o,onClearFilters:l})=>{const c=t||a||n.length>0;return e.jsxs(Me,{children:[e.jsx(Se,{asChild:!0,children:e.jsxs(d,{variant:"outline",className:"gap-2",children:[e.jsx(Q,{className:"h-4 w-4"}),"Filter",c&&e.jsx(y,{variant:"secondary",className:"ml-2",children:(t?1:0)+(a?1:0)+n.length})]})}),e.jsx(Te,{className:"w-80",align:"end",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-semibold",children:"Avancerade filter"}),c&&e.jsxs(d,{variant:"ghost",size:"sm",onClick:l,children:[e.jsx(h,{className:"h-4 w-4 mr-1"}),"Rensa"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4"}),"Från datum"]}),e.jsx(f,{type:"date",value:t,onChange:e=>s(e.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4"}),"Till datum"]}),e.jsx(f,{type:"date",value:a,onChange:e=>i(e.target.value)})]}),r.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:"Kategorier"}),e.jsx("div",{className:"flex flex-wrap gap-2 max-h-32 overflow-y-auto",children:r.map(t=>e.jsx(y,{variant:n.includes(t)?"default":"outline",className:"cursor-pointer",onClick:()=>o(t),children:t},t))})]})]})})]})},De=20,Fe=300,Oe=2;const Le=({className:t,...a})=>e.jsx("nav",{role:"navigation","aria-label":"pagination",className:m("mx-auto flex w-full justify-center",t),...a});Le.displayName="Pagination";const _e=s.forwardRef(({className:t,...a},n)=>e.jsx("ul",{ref:n,className:m("flex flex-row items-center gap-1",t),...a}));_e.displayName="PaginationContent";const Ee=s.forwardRef(({className:t,...a},n)=>e.jsx("li",{ref:n,className:m("",t),...a}));Ee.displayName="PaginationItem";const ze=({className:t,isActive:a,size:n="icon",...r})=>e.jsx("a",{"aria-current":a?"page":void 0,className:m(x({variant:a?"outline":"ghost",size:n}),t),...r});ze.displayName="PaginationLink";const Ye=({className:t,...a})=>e.jsxs(ze,{"aria-label":"Go to previous page",size:"default",className:m("gap-1 pl-2.5",t),...a,children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx("span",{children:"Previous"})]});Ye.displayName="PaginationPrevious";const He=({className:t,...a})=>e.jsxs(ze,{"aria-label":"Go to next page",size:"default",className:m("gap-1 pr-2.5",t),...a,children:[e.jsx("span",{children:"Next"}),e.jsx(T,{className:"h-4 w-4"})]});He.displayName="PaginationNext";const qe=({tableName:t,title:a,description:n,source:r,backLink:c=("riksdagen"===r?"/riksdagen":"/regeringskansliet"),dataType:u,dateColumn:m="publicerad_datum",titleColumn:h="titel"})=>{const[x,M]=s.useState(""),[S,T]=s.useState("datum"),[_,E]=s.useState(1),[z,Y]=s.useState(""),[H,q]=s.useState(""),[$,B]=s.useState([]),Q=De,{trackView:I}={trackView:o({mutationFn:async({tableName:e,documentId:t})=>{const{error:a}=await g.rpc("increment_document_view",{p_table_name:e,p_document_id:t});if(a)throw a}}).mutate},R=function(e,t=Fe){const[a,n]=s.useState(e);return s.useEffect(()=>{const a=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(a)}},[e,t]),a}(x,Fe),{data:W,isLoading:X}=l({queryKey:[t,R,S,z,H,$],queryFn:async()=>{let e=g.from(t).select("*");R&&R.length>=Oe&&(e=e.or(`titel.ilike.%${R}%,document_id.ilike.%${R}%,beteckningsnummer.ilike.%${R}%`)),z&&(e=e.gte(m,z)),H&&(e=e.lte(m,H));const a="datum"===S?m:h;e=e.order(a,{ascending:"datum"!==S,nullsFirst:!1});const{data:n,error:r}=await e;if(r)throw r;return n}}),U=s.useMemo(()=>{if(!W)return[];const e=new Set;return W.forEach(t=>{t.kategorier&&Array.isArray(t.kategorier)&&t.kategorier.forEach(t=>e.add(t))}),Array.from(e).sort()},[W]),V=s.useMemo(()=>W?0===$.length?W:W.filter(e=>!(!e.kategorier||!Array.isArray(e.kategorier))&&$.some(t=>e.kategorier.includes(t))):[],[W,$]),K=Math.ceil(((null==V?void 0:V.length)||0)/Q),J=s.useMemo(()=>{const e=(_-1)*Q;return(null==V?void 0:V.slice(e,e+Q))||[]},[V,_]),Z=t=>{if(!t)return null;const a=Array.isArray(t)?t:[t];return e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:a.map((t,a)=>{const n=t.name||t.filename||`Fil ${a+1}`,r=t.url||t.local_url||t;return"string"==typeof r&&r?e.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-primary hover:underline",children:[e.jsx(A,{className:"h-3 w-3"}),n]},a):null})})};return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto px-4 py-6 md:py-8 max-w-7xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(i,{to:c,children:e.jsxs(d,{variant:"ghost",className:"mb-4",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Tillbaka"]})}),e.jsx("h1",{className:"text-3xl md:text-4xl font-serif font-bold mb-4 text-foreground",children:a}),e.jsx("p",{className:"text-muted-foreground text-lg mb-6",children:n}),e.jsx(C,{source:r}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:gap-4 items-stretch md:items-center mb-6",children:[e.jsxs("div",{className:"relative flex-1 min-w-0",children:[e.jsx(F,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(f,{placeholder:"Sök efter titel, dokumentnummer eller beteckning...",value:x,onChange:e=>M(e.target.value),className:"pl-10 h-11"})]}),e.jsxs("select",{value:S,onChange:e=>T(e.target.value),className:"px-4 py-2 h-11 border rounded-md bg-background text-sm min-w-[200px]",children:[e.jsx("option",{value:"datum",children:"Sortera efter datum"}),e.jsx("option",{value:"titel",children:"Sortera efter titel"})]}),e.jsx(Pe,{dateFrom:z,dateTo:H,selectedCategories:$,availableCategories:U,onDateFromChange:Y,onDateToChange:q,onCategoryToggle:e=>{B(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]),E(1)},onClearFilters:()=>{Y(""),q(""),B([]),E(1)}}),e.jsxs(d,{variant:"outline",onClick:()=>{if(!V||0===V.length)return;((e,t)=>{if(!e||0===e.length)return;const a=Object.keys(e[0]),n=[a.join(","),...e.map(e=>a.map(t=>{const a=e[t];return null==a?"":"string"==typeof a&&(a.includes(",")||a.includes('"'))?`"${a.replace(/"/g,'""')}"`:a}).join(","))].join("\n"),r=new Blob(["\ufeff"+n],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),i=URL.createObjectURL(r);s.setAttribute("href",i),s.setAttribute("download",`${t}.csv`),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)})(V.map(e=>{var t;return{titel:e.titel,document_id:e.document_id,beteckningsnummer:e.beteckningsnummer,publicerad_datum:e.publicerad_datum,avsandare:e.avsandare||e.departement,kategorier:null==(t=e.kategorier)?void 0:t.join("; ")}}),`${a.toLowerCase().replace(/\s+/g,"-")}-${(new Date).toISOString().split("T")[0]}`)},disabled:!V||0===V.length,className:"h-11",children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Exportera CSV"}),e.jsx("span",{className:"sm:hidden",children:"CSV"})]}),e.jsxs(d,{variant:"outline",onClick:()=>{V&&0!==V.length&&((e,t)=>{if(!e||0===e.length)return;const a=JSON.stringify(e,null,2),n=new Blob([a],{type:"application/json"}),r=document.createElement("a"),s=URL.createObjectURL(n);r.setAttribute("href",s),r.setAttribute("download",`${t}.json`),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)})(V,`${a.toLowerCase().replace(/\s+/g,"-")}-${(new Date).toISOString().split("T")[0]}`)},disabled:!V||0===V.length,className:"h-11",children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Exportera JSON"}),e.jsx("span",{className:"sm:hidden",children:"JSON"})]})]}),(z||H||$.length>0)&&e.jsx("div",{className:"mb-4 p-3 bg-muted rounded-md",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Visar ",(null==V?void 0:V.length)||0," av ",(null==W?void 0:W.length)||0," dokument"]})})]}),X?e.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(t=>e.jsx(p,{children:e.jsxs(w,{children:[e.jsx(b,{className:"h-6 w-3/4"}),e.jsx(b,{className:"h-4 w-1/2 mt-2"})]})},t))}):J&&0!==J.length?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:J.map(a=>e.jsxs(p,{className:"hover:shadow-sm transition-all duration-200 border-border/50",children:[e.jsx(w,{children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(j,{className:"text-xl mb-2",children:a.titel||a.document_id}),e.jsxs(v,{className:"space-y-1",children:[a.beteckningsnummer&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx("span",{children:a.beteckningsnummer})]}),a.publicerad_datum&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx("span",{children:ye(new Date(a.publicerad_datum),"d MMMM yyyy")})]}),(a.avsandare||a.departement)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{children:a.avsandare||a.departement})]})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[a.kategorier&&a.kategorier.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:a.kategorier.slice(0,3).map((t,a)=>e.jsx(y,{variant:"secondary",className:"text-xs",children:t},a))}),e.jsx(Ce,{tableName:t,documentId:a.document_id})]})]})}),e.jsxs(N,{children:[a.innehall&&e.jsx("p",{className:"text-sm text-muted-foreground mb-2 line-clamp-3",children:a.innehall}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.url&&e.jsx("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",children:e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>I({tableName:t,documentId:a.document_id}),children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Visa original"]})}),a.local_pdf_url&&e.jsx("a",{href:a.local_pdf_url,target:"_blank",rel:"noopener noreferrer",children:e.jsxs(d,{variant:"outline",size:"sm",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Ladda ner PDF"]})}),a.markdown_url&&e.jsx("a",{href:a.markdown_url,target:"_blank",rel:"noopener noreferrer",children:e.jsxs(d,{variant:"outline",size:"sm",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Markdown"]})})]}),(a.local_files||a.local_bilagor)&&Z(a.local_files||a.local_bilagor)]})]},a.id))}),K>1&&e.jsx("div",{className:"mt-8",children:e.jsx(Le,{children:e.jsxs(_e,{children:[e.jsx(Ee,{children:e.jsx(Ye,{onClick:()=>E(e=>Math.max(1,e-1)),className:1===_?"pointer-events-none opacity-50":"cursor-pointer"})}),Array.from({length:K},(e,t)=>t+1).filter(e=>K<=7||(1===e||e===K||e>=_-1&&e<=_+1)).map((t,a,n)=>a>0&&t-n[a-1]>1?e.jsx(Ee,{children:e.jsx("span",{className:"px-4",children:"..."})},`ellipsis-${t}`):e.jsx(Ee,{children:e.jsx(ze,{onClick:()=>E(t),isActive:_===t,className:"cursor-pointer",children:t})},t)),e.jsx(Ee,{children:e.jsx(He,{onClick:()=>E(e=>Math.min(K,e+1)),className:_===K?"pointer-events-none opacity-50":"cursor-pointer"})})]})})})]}):e.jsx(k,{message:`Inga ${a.toLowerCase()} hittades`,suggestion:x||z||H||$.length>0?"Prova att ändra dina filter":`Använd knappen ovan för att hämta ${a.toLowerCase()}`})]})})};export{qe as G};
