import{j as e}from"./ui-vendor-B50KzqUP.js";import{r as s,L as a}from"./react-vendor-xmALwEl6.js";import{u as r}from"./query-vendor-CSOQ5a_6.js";import{C as l,a as n,S as t,b as i,f as d,s as m}from"./index-pAwTUmbv.js";import{B as o}from"./badge-Dz51AyLj.js";import{E as c}from"./EmptyState-DoaAbft3.js";import{F as x}from"./FilterBar-C5MLVTVW.js";import{F as u}from"./file-text-C6mr0w7N.js";import{C as h}from"./calendar-B2HvfI6x.js";import{E as p}from"./external-link-UpQKxp4P.js";import{f,s as j}from"./sv-qPpAa4hK.js";import"./supabase-vendor-D1LX2-r6.js";import"./circle-alert-CS47a3vq.js";import"./search-Bl9Tdm91.js";const g=()=>{const[g,v]=s.useState(""),{data:N,isLoading:k}=r({queryKey:["regeringskansliet-dokument"],queryFn:async()=>{const{data:e,error:s}=await m.from("regeringskansliet_dokument").select("*").order("publicerad_datum",{ascending:!1});if(s)throw s;return e}}),b=null==N?void 0:N.filter(e=>{var s,a,r,l;const n=g.toLowerCase();return(null==(s=e.titel)?void 0:s.toLowerCase().includes(n))||(null==(a=e.avsandare)?void 0:a.toLowerCase().includes(n))||(null==(r=e.typ)?void 0:r.toLowerCase().includes(n))||(null==(l=e.beteckningsnummer)?void 0:l.toLowerCase().includes(n))});return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"w-full bg-primary py-1"}),e.jsxs("div",{className:"container mx-auto px-4 py-12 max-w-7xl",children:[e.jsxs("header",{className:"mb-12",children:[e.jsx(a,{to:"/regeringskansliet",className:"text-primary hover:underline mb-4 inline-block",children:"← Tillbaka till Regeringskansliet"}),e.jsx("h1",{className:"text-4xl font-serif font-bold text-foreground mb-4",children:"Dokument"}),e.jsx("div",{className:"w-20 h-1 bg-secondary mb-6"}),e.jsxs("p",{className:"text-muted-foreground",children:[(null==b?void 0:b.length)||0," dokument från regeringen.se"]})]}),e.jsx(x,{searchQuery:g,onSearchChange:v,placeholder:"Sök dokument, typ, avsändare..."}),k?e.jsx("div",{className:"space-y-4",children:[...Array(10)].map((s,a)=>e.jsx(l,{children:e.jsxs(n,{children:[e.jsx(t,{className:"h-6 w-3/4 mb-2"}),e.jsx(t,{className:"h-4 w-1/2"})]})},a))}):b&&0===b.length?e.jsx(c,{message:g?"Inga dokument hittades":"Inga dokument i databasen",suggestion:g?"Prova att ändra din sökning":"Använd 'Hämta data'-knappen för att ladda ned dokument"}):e.jsx("div",{className:"space-y-4",children:null==b?void 0:b.map(s=>e.jsx(l,{className:"hover:shadow-lg transition-shadow",children:e.jsx(n,{children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[s.typ&&e.jsxs(o,{variant:"outline",children:[e.jsx(u,{className:"h-3 w-3 mr-1"}),s.typ]}),s.beteckningsnummer&&e.jsx(o,{variant:"secondary",children:s.beteckningsnummer}),s.kategorier&&s.kategorier.length>0&&s.kategorier.slice(0,2).map((s,a)=>e.jsx(o,{variant:"outline",children:s},a))]}),e.jsx(i,{className:"text-xl mb-2",children:s.titel||"Dokument"}),s.avsandare&&e.jsxs(d,{className:"mb-2",children:["Avsändare: ",s.avsandare]}),e.jsx("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:s.publicerad_datum&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(h,{className:"h-3 w-3"}),f(new Date(s.publicerad_datum),{addSuffix:!0,locale:j})]})}),s.local_files&&Array.isArray(s.local_files)&&s.local_files.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Nedladdade filer:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.local_files.map((s,a)=>e.jsxs("a",{href:s.local_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-xs text-primary hover:underline",children:[e.jsx(u,{className:"h-3 w-3"}),s.filename]},a))})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[s.url&&e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-primary hover:underline",children:["Original ",e.jsx(p,{className:"h-3 w-3"})]}),s.markdown_url&&e.jsxs("a",{href:s.markdown_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-primary hover:underline",children:["Markdown ",e.jsx(p,{className:"h-3 w-3"})]})]})]})})},s.id))})]})]})};export{g as default};
