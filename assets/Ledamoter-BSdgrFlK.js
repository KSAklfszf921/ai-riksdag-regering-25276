import{j as e}from"./ui-vendor-B50KzqUP.js";import{r as a,L as s}from"./react-vendor-xmALwEl6.js";import{u as r}from"./query-vendor-CSOQ5a_6.js";import{C as l,a as n,S as t,b as d,s as i}from"./index-pAwTUmbv.js";import{A as o,a as m,b as c}from"./avatar-DnQxPzlS.js";import{B as g}from"./badge-Dz51AyLj.js";import{F as x}from"./FilterBar-C5MLVTVW.js";import{E as u}from"./EmptyState-DoaAbft3.js";import"./supabase-vendor-D1LX2-r6.js";import"./search-Bl9Tdm91.js";import"./circle-alert-CS47a3vq.js";const h=()=>{const[h,j]=a.useState(""),{data:p,isLoading:b}=r({queryKey:["ledamoter"],queryFn:async()=>{const{data:e,error:a}=await i.from("riksdagen_ledamoter").select("*").order("efternamn",{ascending:!0});if(a)throw a;return e}}),f={S:"bg-red-600",M:"bg-blue-600",SD:"bg-yellow-600",C:"bg-green-600",V:"bg-red-700",KD:"bg-blue-800",L:"bg-blue-400",MP:"bg-green-500"},v=null==p?void 0:p.filter(e=>{var a,s,r,l;const n=h.toLowerCase();return(null==(a=e.fornamn)?void 0:a.toLowerCase().includes(n))||(null==(s=e.efternamn)?void 0:s.toLowerCase().includes(n))||(null==(r=e.parti)?void 0:r.toLowerCase().includes(n))||(null==(l=e.valkrets)?void 0:l.toLowerCase().includes(n))});return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"w-full bg-primary py-1"}),e.jsxs("div",{className:"container mx-auto px-4 py-12 max-w-7xl",children:[e.jsxs("header",{className:"mb-12",children:[e.jsx(s,{to:"/riksdagen",className:"text-primary hover:underline mb-4 inline-block",children:"← Tillbaka till Riksdagen"}),e.jsx("h1",{className:"text-4xl font-serif font-bold text-foreground mb-4",children:"Riksdagens Ledamöter"}),e.jsx("div",{className:"w-20 h-1 bg-secondary mb-6"}),e.jsxs("p",{className:"text-muted-foreground",children:[(null==v?void 0:v.length)||0," ledamöter i riksdagen"]})]}),e.jsx(x,{searchQuery:h,onSearchChange:j,placeholder:"Sök ledamot, parti eller valkrets..."}),b?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[...Array(12)].map((a,s)=>e.jsx(l,{children:e.jsxs(n,{children:[e.jsx(t,{className:"h-24 w-24 rounded-full mx-auto mb-4"}),e.jsx(t,{className:"h-6 w-3/4 mx-auto mb-2"}),e.jsx(t,{className:"h-4 w-1/2 mx-auto"})]})},s))}):v&&0===v.length?e.jsx(u,{message:h?"Inga ledamöter hittades":"Inga ledamöter i databasen",suggestion:h?"Prova att ändra din sökning":"Använd 'Hämta data'-knappen på Riksdagen-sidan för att ladda ned ledamöter"}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:null==v?void 0:v.map(a=>{var s,r;return e.jsx(l,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(n,{className:"text-center",children:[e.jsxs(o,{className:"h-24 w-24 mx-auto mb-4",children:[e.jsx(m,{src:a.local_bild_url||a.bild_url||void 0,alt:`${a.fornamn} ${a.efternamn}`}),e.jsxs(c,{children:[null==(s=a.fornamn)?void 0:s[0],null==(r=a.efternamn)?void 0:r[0]]})]}),e.jsxs(d,{className:"text-lg",children:[a.tilltalsnamn||a.fornamn," ",a.efternamn]}),e.jsxs("div",{className:"flex flex-col gap-2 items-center mt-2",children:[a.parti&&e.jsx(g,{className:`${f[a.parti]||"bg-gray-600"} text-white`,children:a.parti}),a.valkrets&&e.jsx("span",{className:"text-sm text-muted-foreground",children:a.valkrets})]})]})},a.id)})})]})]})};export{h as default};
